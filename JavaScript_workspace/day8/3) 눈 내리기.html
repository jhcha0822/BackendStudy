<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #wrapper{
            width: 640px;
            height: 960px;
            background-image: url(../images/winter\ night.png);
            background-size: 640px 960px;
            margin: auto;
        }
    </style>
    <script src="./Snow.js"></script>
    <script src="../js/lib.js"></script>
    <script>
        let wrapper;
        let snowArray = [];
        let count = 0;
        let flag = true;

        function createSnow(){
            // container, x, y, width, height, velX, velY, blur
            let x = getRandomByRange(-50, 690);
            let y = getRandomByRange(-50, 50);
            let width = getRandomByRange(3, 9);
            let height = getRandomByRange(3, 9);
            let velX = getRandomByRange(-1, 1);
            let velY = 1; //getRandomByRange(1, 2);
            let blur = getRandomByRange(1, 3);

            let snow = new Snow(wrapper, x, y, width, height, velX, velY, blur);
            snowArray.push(snow);
        }

        function gameLoop(){
            if(flag) {
                count++;
                if(count%5 == 0)
                    createSnow();
                for(let i=0; i<snowArray.length; i++)
                    snowArray[i].move();
            }
        }

        addEventListener("load", function(){
            wrapper = document.getElementById("wrapper");
            
            setInterval("gameLoop()", 30);

            document.body.addEventListener("keydown", function(e){
                if(e.keyCode == 27)
                    flag = !flag;
            });
        });
    </script>
</head>
<body>
    <div id="wrapper"></div>
</body>
</html>

<!-- 
    let fruit = ["apple", "orange", "kiwi"];
    fruit.indexOf("orange");
    >> 1
-->